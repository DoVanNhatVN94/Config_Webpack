
# Project Title



### Kh·ªüi t·∫°o m·ªôt d·ª± √°n nodej
```bash
yarn init --yes
```
ho·∫∑c
```bash
npm init --yes
```
## C√†i c√°c package c·∫ßn thi·∫øt

### C√†i ƒë·∫∑t React v√†o `dependencies`
```bash
yarn add -D @types/react @types/react-dom typescript
```

### C√†i ƒë·∫∑t Webpack
```bash
yarn add -D webpack webpack-cli webpack-dev-server
```

### C√†i ƒë·∫∑t Babel
```bash
yarn add -D @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript babel-loader
```

### C√†i ƒë·∫∑t c√°c loader v√† plugins b·ªï tr·ª£
```bash
yarn add -D clean-webpack-plugin compression-webpack-plugin copy-webpack-plugin css-loader css-minimizer-webpack-plugin dotenv-webpack file-loader html-webpack-plugin mini-css-extract-plugin sass sass-loader serve webpack-bundle-analyzer
```

### CC√†i ƒë·∫∑t ESLint v√† Prettier
```bash
yarn add -D eslint prettier @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks eslint-webpack-plugin eslint-import-resolver-typescript
```

## Config d·ª± √°n

### T·∫°o file .babelrc ·ªü th∆∞ m·ª•c root
```bash
{
  "presets": ["@babel/preset-env", "@babel/preset-typescript", ["@babel/preset-react", { "runtime": "automatic" }]]
}
```

### T·∫°o file .browserslistrc ·ªü th∆∞ m·ª•c root
```TEXT
# H·ªó tr·ª£ c√°c phi√™n b·∫£n tr√¨nh duy·ªát m√† c√≥ l∆∞·ª£ng ng∆∞·ªùi d√πng l·ªõn h∆°n 0.2% v√† ch∆∞a b·ªã khai t·ª≠
> 0.2% and not dead
```

### T·∫°o file .editorconfig ·ªü th∆∞ m·ª•c root
```
[*]
indent_size = 2
indent_style = space
```

### T·∫°o file .env ·ªü th∆∞ m·ª•c root
```
HOST=https://google.com
```

### T·∫°o file .eslintrc.js ·ªü th∆∞ m·ª•c root
```JS
/* eslint-disable @typescript-eslint/no-var-requires */
const path = require('path')
module.exports = {
  extends: [
    // Ch√∫ng ta s·∫Ω d√πng c√°c rule m·∫∑c ƒë·ªãnh t·ª´ c√°c plugin m√† ch√∫ng ta ƒë√£ c√†i.
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'plugin:import/recommended',
    'plugin:jsx-a11y/recommended',
    'plugin:@typescript-eslint/recommended',
    // Disable c√°c rule m√† eslint xung ƒë·ªôt v·ªõi prettier.
    // ƒê·ªÉ c√°i n√†y ·ªü d∆∞·ªõi ƒë·ªÉ n√≥ override c√°c rule ph√≠a tr√™n!.
    'eslint-config-prettier',
    'prettier'
  ],
  plugins: ['prettier'],
  settings: {
    react: {
      // N√≥i eslint-plugin-react t·ª± ƒë·ªông bi·∫øt version c·ªßa React.
      version: 'detect'
    },
    // N√≥i ESLint c√°ch x·ª≠ l√Ω c√°c import
    'import/resolver': {
      node: {
        paths: [path.resolve(__dirname)],
        extensions: ['.js', '.jsx', '.ts', '.tsx']
      },
      typescript: {
        project: path.resolve(__dirname, './tsconfig.json')
      }
    }
  },
  env: {
    node: true
  },
  rules: {
    // T·∫Øt rule y√™u c·∫ßu import React trong file jsx
    'react/react-in-jsx-scope': 'off',
    // C·∫£nh b√°o khi th·∫ª <a target='_blank'> m√† kh√¥ng c√≥ rel="noreferrer"
    'react/jsx-no-target-blank': 'warn',
    // TƒÉng c∆∞·ªùng m·ªôt s·ªë rule prettier (copy t·ª´ file .prettierrc qua)
    'prettier/prettier': [
      'warn',
      {
        arrowParens: 'always',
        semi: false,
        trailingComma: 'none',
        tabWidth: 2,
        endOfLine: 'auto',
        useTabs: false,
        singleQuote: true,
        printWidth: 120,
        jsxSingleQuote: true
      }
    ]
  }
}
```

### T·∫°o file .eslintignore ·ªü th∆∞ m·ª•c root
```
node_modules/
dist/
```

### T·∫°o file .gitignore ·ªü th∆∞ m·ª•c root
```
node_modules/
dist/
```

### T·∫°o file .prettierrc ·ªü th∆∞ m·ª•c root
```bash
yarn add -D @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript babel-loader
```

### C√†i ƒë·∫∑t Babel
```JSON
{
  "arrowParens": "always",
  "semi": false,
  "trailingComma": "none",
  "tabWidth": 2,
  "endOfLine": "auto",
  "useTabs": false,
  "singleQuote": true,
  "printWidth": 120,
  "jsxSingleQuote": true
}

```

### T·∫°o file .prettierignore ·ªü th∆∞ m·ª•c root
```
node_modules/
dist/
```

### T·∫°o file tsconfig.json ·ªü th∆∞ m·ª•c root
```JSON
{
  "compilerOptions": {
    "target": "ES2015",
    "useDefineForClassFields": true,
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "allowJs": false,
    "skipLibCheck": true,
    "esModuleInterop": false,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "baseUrl": ".",
    "paths": {
      "@pages/*": ["src/pages/*"]
    }
  },
  "include": ["src"]
}
```

### M·ªü file package.json l√™n, th√™m ƒëo·∫°n script d∆∞·ªõi v√†o
```JSON
"scripts": {
    "dev": "webpack-dev-server --mode development",
    "build": "webpack --mode production",
    "build:analyze": "webpack --mode production --env analyze",
    "preview": "serve dist/ -s",
    "lint": "eslint --ext js,jsx,ts,tsx src/",
    "lint:fix": "eslint --fix --ext js,jsx,ts,tsx src/",
    "prettier": "prettier --check \"src/**/(*.tsx|*.ts|*.jsx|*.js|*.scss|*.css)\"",
    "prettier:fix": "prettier --write \"src/**/(*.tsx|*.ts|*.jsx|*.js|*.scss|*.css)\""
}
```

### ü•àT·∫°o file webpack.config.js t·∫°i th∆∞ m·ª•c root
```JS
/* eslint-disable @typescript-eslint/no-var-requires */
const path = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')
const CopyWebpackPlugin = require('copy-webpack-plugin')
const MiniCssExtractPlugin = require('mini-css-extract-plugin')
const CompressionPlugin = require('compression-webpack-plugin')
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin')
const { CleanWebpackPlugin } = require('clean-webpack-plugin')
const ESLintPlugin = require('eslint-webpack-plugin')
const Dotenv = require('dotenv-webpack')
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin
const webpack = require('webpack')

// C√°i d√≤ng n√†y gi√∫p Editor g·ª£i √Ω ƒë∆∞·ª£c c√°c gi√° tr·ªã cho d√≤ng code config ngay ph√≠a d∆∞·ªõi n√≥
// (gi·ªëng nh∆∞ ƒëang d√πng Typescript v·∫≠y ƒë√≥ üòâ)
/** @type {(env: any, arg: {mode: string}) => import('webpack').Configuration} **/
module.exports = (env, argv) => {
  const isProduction = argv.mode === 'production'
  const isAnalyze = Boolean(env?.analyze)
  /** @type {import('webpack').Configuration} **/
  const config = {
    // Quy ƒë·ªãnh c√°ch webpack gi·∫£i quy·∫øt c√°c file
    resolve: {
      // Gi·∫£i quy·∫øt c√°c file theo th·ª© t·ª± ∆∞u ti√™n t·ª´ tr√°i sang ph·∫£i n·∫øu import
      // c√°c file c√πng m·ªôt t√™n nh∆∞ng c√°c ƒëu√¥i m·ªü r·ªông
      extensions: ['.tsx', '.ts', '.jsx', '.js'],
      alias: {
        // C·∫•u h√¨nh alias cho webpack
        // ƒë·ªÉ khi import cho ng·∫Øn g·ªçn
        // V√≠ d·ª•: import Login from '@pages/Login'
        // Thay v√¨: import Login from '../pages/Login' ch·∫≥ng h·∫°n
        '@pages': path.resolve(__dirname, './src/pages')
      }
    },
    // File ƒë·∫ßu v√†o cho webpack, file n√†y th∆∞·ªùng l√† file import m·ªçi file kh√°c
    entry: ['./src/index.tsx'],
    // Khai b√°o c√°c module d√πng trong webpack
    module: {
      rules: [
        {
          test: /\.tsx?$/, // duy·ªát c√°c file .ts || .tsx
          exclude: /node_modules/,
          use: ['babel-loader'] // Gi√∫p d·ªãch code TS, React sang JS,
        },
        {
          test: /\.(s[ac]ss|css)$/, // duy·ªát c√°c file sass || scss || css
          use: [
            MiniCssExtractPlugin.loader,
            {
              loader: 'css-loader', // d√πng import 'filename.css' trong file tsx, ts
              options: { sourceMap: !isProduction } // Hi·ªÉn th·ªã sourcemap ·ªü m√¥i tr∆∞·ªùng dev cho d·ªÖ debug
            },
            {
              loader: 'sass-loader', // bi√™n d·ªãch sass sang css
              options: { sourceMap: !isProduction }
            }
          ]
        },
        {
          test: /\.(png|svg|jpg|gif)$/, // D√πng ƒë·ªÉ import file ·∫£nh, n·∫øu c√≥ video/·∫£nh ƒë·ªãnh d·∫°ng kh√°c th√¨ th√™m v√†o ƒë√¢y
          use: [
            {
              loader: 'file-loader',
              options: {
                name: isProduction ? 'static/media/[name].[contenthash:6].[ext]' : '[path][name].[ext]'
              }
            }
          ]
        },
        {
          test: /\.(eot|ttf|woff|woff2)$/, // D√πng ƒë·ªÉ import font
          use: [
            {
              loader: 'file-loader',
              options: {
                name: isProduction ? 'static/fonts/[name].[ext]' : '[path][name].[ext]'
              }
            }
          ]
        }
      ]
    },

    output: {
      filename: 'static/js/main.[contenthash:6].js', // Th√™m m√£ hash t√™n file d·ª±a v√†o content ƒë·ªÉ tr√°nh b·ªã cache b·ªüi CDN hay browser.
      path: path.resolve(__dirname, 'dist'), // Build ra th∆∞ m·ª•c dist
      publicPath: '/'
    },
    devServer: {
      hot: true, // enable Hot Module Replacement, ki·ªÉu nh∆∞ reload nhanh
      port: 3000, // Ch·∫°y port 3000 khi dev
      historyApiFallback: true, // Ph·∫£i set true n·∫øu kh√¥ng khi b·∫°n d√πng lazyload module React th√¨ s·∫Ω g·∫∑p l·ªói kh√¥ng load ƒë∆∞·ª£c file.
      // C·∫•u h√¨nh ph·ª•c v·ª• file html trong public
      static: {
        directory: path.resolve(__dirname, 'public', 'index.html'),
        serveIndex: true,
        watch: true // khi thay ƒë·ªïi content trong index.html th√¨ c≈©ng s·∫Ω reload
      }
    },
    devtool: isProduction ? false : 'source-map',
    plugins: [
      // ƒê∆∞a css ra th√†nh m·ªôt file .css ri√™ng bi·ªát thay v√¨ b·ªè v√†o file .js
      new MiniCssExtractPlugin({
        filename: isProduction ? 'static/css/[name].[contenthash:6].css' : '[name].css'
      }),
      // D√πng bi·∫øn m√¥i tr∆∞·ªùng env trong d·ª± √°n
      new Dotenv(),
      // Copy m·ªçi files trong folder public tr·ª´ file index.html
      new CopyWebpackPlugin({
        patterns: [
          {
            from: 'public',
            to: '.',
            filter: (name) => {
              return !name.endsWith('index.html')
            }
          }
        ]
      }),

      // Plugin h·ªó tr·ª£ th√™m th·∫ª style v√† script v√†o index.html
      new HtmlWebpackPlugin({
        template: path.resolve(__dirname, 'public', 'index.html'),
        filename: 'index.html'
      }),
      // Th√™m eslint cho webpack
      new ESLintPlugin({
        extensions: ['.tsx', '.ts', '.js', '.jsx']
      })
    ]
  }

  //üöÄ N·∫øu build th√¨ s·∫Ω th√™m m·ªôt s·ªë config
  if (isProduction) {
    config.plugins = [
      ...config.plugins,
      new webpack.ProgressPlugin(), // Hi·ªÉn th·ªã % khi build
      // N√©n brotli css v√† js nh∆∞ng kh√¥ng hi·ªÉu sao ch·ªâ c√≥ js ƒë∆∞·ª£c n√©n ü•≤
      new CompressionPlugin({
        test: /\.(css|js)$/,
        algorithm: 'brotliCompress'
      }),
      new CleanWebpackPlugin() // D·ªçn d·∫πp th∆∞ m·ª•c build tr∆∞·ªõc ƒë√≥ ƒë·ªÉ chu·∫©n b·ªã cho b·∫£n build hi·ªán t·∫°i
    ]
    if (isAnalyze) {
      config.plugins = [...config.plugins, new BundleAnalyzerPlugin()]
    }
    config.optimization = {
      minimizer: [
        `...`, // C√∫ ph√°p k·∫ø th·ª´a b·ªô minimizers m·∫∑c ƒë·ªãnh trong webpack 5 (i.e. `terser-webpack-plugin`)
        new CssMinimizerPlugin() // minify css
      ]
    }
  }
  return config
}

```

### Th√™m file src/react-app-env.d.ts ƒë·ªÉ import ·∫£nh kh√¥ng b·ªã typescript b·∫Øt l·ªói.
```TS
// images
declare module '*.png' {
  const src: string
  export default src
}
declare module '*.jpg' {
  const src: string
  export default src
}
declare module '*.jpeg' {
  const src: string
  export default src
}
declare module '*.svg' {
  const src: string
  export default src
}
```

## Ch·∫°y th·ª≠

Ch·∫°y `yarn dev` ƒë·ªÉ xem th√†nh qu·∫£

ƒê·ªÉ build d·ª± √°n th√¨ ch·∫°y `yarn build`

N√≥ s·∫Ω xu·∫•t hi·ªán th∆∞ m·ª•c `dist` v·ªõi c·∫•u tr√∫c nh∆∞ d∆∞·ªõi ƒë√¢y

üì¶dist
 ‚î£ üìÇstatic
 ‚îÉ ‚î£ üìÇcss
 ‚îÉ ‚îÉ ‚îó üìúmain.3a69ca.css
 ‚îÉ ‚î£ üìÇjs
 ‚îÉ ‚îÉ ‚î£ üìúmain.3ac995.js
 ‚îÉ ‚îÉ ‚î£ üìúmain.3ac995.js.br
 ‚îÉ ‚îÉ ‚îó üìúmain.3ac995.js.LICENSE.txt
 ‚îÉ ‚îó üìÇmedia
 ‚îÉ ‚îÉ ‚îó üìúreact.f57b34.svg
 ‚î£ üìúicon.png
 ‚îó üìúindex.html


 Ch·∫°y `yarn preview` ƒë·ªÉ preview nh√©, y√™u c·∫ßu l√† trong th∆∞ m·ª•c `dist` ph·∫£i c√≥ b·∫£n build m·ªõi preview ƒë∆∞·ª£c

 ƒê·ªÉ ph√¢n t√≠ch file build th√¨ ae ch·ªâ c·∫ßn ch·∫°y c√¢u l·ªánh `yarn build:analyze`

 Ki·ªÉm tra d·ª± √°n c√≥ b·ªã l·ªói g√¨ li√™n quan ESLint kh√¥ng: `yarn lint`

T·ª± ƒë·ªông fix c√°c l·ªói li√™n quan ESLint (kh√¥ng ph·∫£i c√°i g√¨ c≈©ng fix ƒë∆∞·ª£c, nh∆∞ng fix c≈©ng nhi·ªÅu): `yarn lint:fix`

Ki·ªÉm tra d·ª± √°n c√≥ b·ªã l·ªói g√¨ li√™n quan Prettier kh√¥ng: `yarn prettier`

T·ª± ƒë·ªông fix c√°c l·ªói li√™n quan Prettier: `yarn prettier:fix`
